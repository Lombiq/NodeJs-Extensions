{
  "name": "nodejs-extensions",
  "version": "0.0.1",
  "private": true,
  "devDependencies": {
    "autoprefixer": "^10.4.2",
    "clean-css-cli": "^5.5.2",
    "nodemon": "^2.0.15",
    "npm-run-all": "^4.1.5",
    "postcss": "^8.4.7",
    "postcss-cli": "^9.1.0",
    "rimraf": "^3.0.2",
    "sass": "^1.49.8",
    "stylelint": "^14.5.1",
    "stylelint-config-standard-scss": "^3.0.0"
  },
  "scripts": {
    "dotnet-prebuild": "ROOT_DIR=$NODE_JS_EXT_TARGET_DIRECTORY && pnpm build:styles",
    "dotnet-postclean": "ROOT_DIR=$NODE_JS_EXT_TARGET_DIRECTORY && pnpm clean:styles",

    "echo-env": "npm run env",
    "build:styles": "ROOT_DIR=$ROOT_DIR SCSS_SOURCE=Assets/Styles SCSS_TARGET=wwwroot/css pnpm _build:styles",
    "build:styles:args": "SCSS_SOURCE=$npm_config_source SCSS_TARGET=$npm_config_target pnpm _build:styles",
    "_build:styles": "ROOT_DIR=$ROOT_DIR run-p --continue-on-error _compile:styles _lint:styles",
    "lint:styles": "SCSS_SOURCE=Assets/Styles SCSS_TARGET=wwwroot/css pnpm _lint:styles",
    "lint:styles:args": "SCSS_SOURCE=$npm_config_source SCSS_TARGET=$npm_config_target pnpm _lint:styles",
    "_lint:styles": "(echo \"ROOT_DIR=$ROOT_DIR\" && cd $ROOT_DIR && dir . && stylelint \"$SCSS_SOURCE/**/*.scss\") || ERRORSTEP=stylelint pnpm _error:styles",
    "compile:styles": "SCSS_SOURCE=Assets/Styles SCSS_TARGET=wwwroot/css pnpm _compile:styles",
    "compile:styles:args": "SCSS_SOURCE=$npm_config_source SCSS_TARGET=$npm_config_target pnpm _compile:styles",
    "_compile:styles": "run-s _sass:styles _autoprefix:styles _minify:styles _rm:temp:styles || ERRORSTEP=compilation pnpm _error:styles",
    "_sass:styles": "cd $ROOT_DIR && sass $SCSS_SOURCE:$SCSS_TARGET/_temp_ --embed-sources",
    "_autoprefix:styles": "cd $ROOT_DIR && postcss $SCSS_TARGET/_temp_/**/*.css --base $SCSS_TARGET/_temp_ --dir $SCSS_TARGET --use autoprefixer --map",
    "_minify:styles": "cd $ROOT_DIR && cleancss --batch --batch-suffix .min \"$SCSS_TARGET/**/*.css\" \"!$SCSS_TARGET/**/*.min.css\" \"!$SCSS_TARGET/_temp_/**/*\"",
    "_rm:temp:styles": "cd $ROOT_DIR && rimraf $SCSS_TARGET/_temp_",
    "clean:styles": "SCSS_TARGET=wwwroot/css pnpm _clean:styles",
    "clean:styles:args": "SCSS_TARGET=$npm_config_target pnpm _clean:styles",
    "_clean:styles": "cd $ROOT_DIR && rimraf \"$SCSS_TARGET/**/*.*\"",
    "watch:styles": "SCSS_SOURCE=Assets/Styles SCSS_TARGET=wwwroot/css pnpm _watch:styles",
    "watch:styles:args": "SCSS_SOURCE=$npm_config_source SCSS_TARGET=$npm_config_target pnpm _watch:styles",
    "_watch:styles": "nodemon --watch $ROOT_DIR/$SCSS_SOURCE --ext scss --exec \"ROOT_DIR=$ROOT_DIR pnpm build:styles:args --source=$SCSS_SOURCE --target=$SCSS_TARGET\"",
    "_error:styles": "echo \"Error in styles pipeline: $ERRORSTEP failed.\""
  },
  "browserslist": [
    "last 1 Chrome version",
    "last 1 Edge version",
    "last 1 Firefox version",
    "last 1 IE version",
    "last 1 iOS version"
  ]
}
